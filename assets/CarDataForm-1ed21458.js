import{A as r,r as l,j as t,ao as b,P as L}from"./index-98452e44.js";import{I as P}from"./FormPage-c37eef32.js";import{a as v}from"./GeneralSelect-cf35ef26.js";import{u as R,o as q,p as w,q as z,f as H,r as J,b as K}from"./useActions-0f1e798e.js";import{a as Q}from"./CompanyCardMedia-f1a89f9f.js";import{M as W}from"./ModalError-36809ab7.js";import"./ByParameters.styled-3406700b.js";import"./Portal-1255ff5c.js";import"./useSlotProps-3ac74678.js";import"./CardMedia-36759fa4.js";import"./Modal-c980e244.js";const X=({formik:a})=>{var x;const{setAutoByMakerAndModel:y,allAutoMakers:m,autoByNumber:V,allAutoModelByMaker:B,autoByMakerAndModel:g,setRefError:E}=R(),S=r(q),u=r(w),o=r(z),{outsideUkraine:d}=r(Q),[n]=r(H),[D,h]=l.useState({name:"Оберіть марку авто"}),[i,M]=l.useState({name:"Оберіть модель авто"}),[c,p]=l.useState(!(n!=null&&n.stateNumber)),k=r(J),F=r(K),T=e=>{E(""),y([]),e.target.value&&d&&(p(!1),m()),e.target.value&&!d&&V(e.target.value),a.handleChange(e)};l.useEffect(()=>{n&&p(!1),n||p(!0)},[n]);const I=e=>{const s=e.target.value.trim().toUpperCase();e.target.value=s,a.handleChange(e)},O=e=>{M({name:"Оберіть модель авто"}),h(e),B(e.id),a.setFieldValue("maker",e.id)},U=e=>{M(e),a.setFieldValue("maker",e.autoMaker),a.setFieldValue("model",{id:e.id,name:e.name})},G=e=>{const s=e.target.value.trim().toUpperCase();e.target.value=s,a.handleChange(e)},f=l.useCallback(()=>{var s;const e=(s=o[0])==null?void 0:s.autoMaker;h(e),(o==null?void 0:o.length)===0&&m()},[o,m]);return l.useEffect(()=>{f()},[f]),l.useEffect(()=>{var A,C,j,N;const e=(C=(A=a.values)==null?void 0:A.brand)==null?void 0:C.replace(/ .*/,""),s=(N=(j=a.values)==null?void 0:j.brand)==null?void 0:N.replace(/^[^\s]+\s/,"").slice(0,1);!d&&(e==null?void 0:e.length)>0&&g(e+" "+s)},[(x=a.values)==null?void 0:x.brand,g,d]),F?t.jsx(W,{}):t.jsx(t.Fragment,{children:t.jsxs(P,{children:[t.jsx(b,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:T,customFunc:I,formikData:a}),a.errors.stateNumber?t.jsx("div",{className:"errorMessage",children:a.errors.stateNumber}):t.jsx("div",{style:{color:"red"},children:k}),t.jsx(b,{id:"year",lableText:"Рік випуску*:",formikData:a,isDisabled:c}),t.jsx(v,{id:"brand",lableText:"Марка*:",currentValue:D,optionsArr:S,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:O,isDisabled:c}),t.jsx(v,{id:"model",lableText:"Модель*:",currentValue:i,optionsArr:(u==null?void 0:u.length)>0?u:o,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:c,isValid:(i==null?void 0:i.name)!=="Оберіть модель авто",changeCB:U}),t.jsx(b,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:a,customFunc:G,isDisabled:c})]})})};X.propTypes={formik:L.object};export{X as default};
