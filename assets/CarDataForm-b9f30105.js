import{D as L,E as r,bl as P,bm as R,bn as q,ao as w,r as l,bo as z,a1 as H,j as t,bh as J,bg as g,P as K}from"./index-55700721.js";import{a as v}from"./GeneralSelect-8bd947d3.js";import{a as Q}from"./CompanyCardMedia-6384d45c.js";import{M as W}from"./ModalError-56f8c224.js";import"./Portal-214960b8.js";import"./useSlotProps-1d4a118d.js";import"./Stack-e395a7d8.js";import"./CardMedia-21a1f148.js";import"./Modal-110b0ffe.js";const X=({formik:a})=>{var f;const{setAutoByMakerAndModel:y,allAutoMakers:m,autoByNumber:E,allAutoModelByMaker:V,autoByMakerAndModel:p,setRefError:B}=L(),S=r(P),u=r(R),n=r(q),{outsideUkraine:d}=r(Q),[o]=r(w),[D,h]=l.useState({name:"Оберіть марку авто"}),[i,M]=l.useState({name:"Оберіть модель авто"}),[c,b]=l.useState(!(o!=null&&o.stateNumber)),k=r(z),F=r(H),T=e=>{B(""),y([]),e.target.value&&d&&(b(!1),m()),e.target.value&&!d&&E(e.target.value),a.handleChange(e)};l.useEffect(()=>{o&&b(!1),o||b(!0)},[o]);const O=e=>{const s=e.target.value.trim().toUpperCase();e.target.value=s,a.handleChange(e)},I=e=>{M({name:"Оберіть модель авто"}),h(e),V(e.id),a.setFieldValue("maker",e.id)},U=e=>{M(e),a.setFieldValue("maker",e.autoMaker),a.setFieldValue("model",{id:e.id,name:e.name})},G=e=>{const s=e.target.value.trim().toUpperCase();e.target.value=s,a.handleChange(e)},x=l.useCallback(()=>{var s;const e=(s=n[0])==null?void 0:s.autoMaker;h(e),(n==null?void 0:n.length)===0&&m()},[n,m]);return l.useEffect(()=>{x()},[x]),l.useEffect(()=>{var A,C,j,N;const e=(C=(A=a.values)==null?void 0:A.brand)==null?void 0:C.replace(/ .*/,""),s=(N=(j=a.values)==null?void 0:j.brand)==null?void 0:N.replace(/^[^\s]+\s/,"").slice(0,1);!d&&(e==null?void 0:e.length)>0&&p(e+" "+s)},[(f=a.values)==null?void 0:f.brand,p,d]),F?t.jsx(W,{}):t.jsx(t.Fragment,{children:t.jsxs(J,{children:[t.jsx(g,{id:"stateNumber",lableText:"Номерний знак*:",handleBlur:T,customFunc:O,formikData:a}),a.errors.stateNumber?t.jsx("div",{className:"errorMessage",children:a.errors.stateNumber}):t.jsx("div",{style:{color:"red"},children:k}),t.jsx(g,{id:"year",lableText:"Рік випуску*:",formikData:a,isDisabled:c}),t.jsx(v,{id:"brand",lableText:"Марка*:",currentValue:D,optionsArr:S,defaultValue:{name:"Оберіть марку авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,changeCB:I,isDisabled:c}),t.jsx(v,{id:"model",lableText:"Модель*:",currentValue:i,optionsArr:(u==null?void 0:u.length)>0?u:n,defaultValue:{name:"Оберіть модель авто"},getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isDisabled:c,isValid:(i==null?void 0:i.name)!=="Оберіть модель авто",changeCB:U}),t.jsx(g,{id:"bodyNumber",lableText:"VIN Номер*:",formikData:a,customFunc:G,isDisabled:c})]})})};X.propTypes={formik:K.object};export{X as default};
